CC = gcc
CFLAGS=-c -Wall

all: main.o dynamicblocks.o staticcblocks.o
	$(CC) main.o dynamicblocks.o staticcblocks.o -o main

main.o: main.c
	$(CC) $(CFLAGS) main.c

dynamicblocks.o: dynamicblocks.c dynamicblocks.h
	$(CC) $(CFLAGS) dynamicblocks.c

staticcblocks.o: staticcblocks.c staticcblocks.h
	$(CC) $(CFLAGS) staticcblocks.c

shared1: $(DYNAMIC_BLOCKS).c $(STATIC_BLOCKS).c main.c
	$(CC) $(CFLAGS) -fPIC -c $(DYNAMIC_BLOCKS).c -o $(DYNAMIC_BLOCKS).o
	$(CC) $(CFLAGS) -fPIC -c $(STATIC_BLOCKS).c -o $(STATIC_BLOCKS).o
	$(CC) $(CFLAGS) -shared -o lib$(DYNAMIC_BLOCKS).so $(DYNAMIC_BLOCKS).o
	$(CC) $(CFLAGS) -shared -o lib$(STATIC_BLOCKS).so $(STATIC_BLOCKS).o
	$(CC) $(CFLAGS) main.c $(SHARED_LIB_ARG) -l$(STATIC_BLOCKS) -l$(DYNAMIC_BLOCKS) -L ./ -o main_shared

clean:
	rm -f *.o main
